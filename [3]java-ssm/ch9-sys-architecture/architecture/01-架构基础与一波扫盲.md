# 架构

- 大型网站技术架构-入门梳理 <http://brianway.github.io/2017/01/18/reading-note-architecture-design/>

# 架构师技能图谱

- 史上最全的架构师图谱 <https://www.jianshu.com/p/c8382065bd2b>

# 架构设计

- <https://blog.dreamtobe.cn/2016/03/09/oo_architecture/>
- 降低耦合度的方法

  - 少用类继承，多用类接口隐藏实现细节
  - 拒绝重复代码
  - 尽量不用硬编码(如 字符串放到 res/string.xml，SQL语句做一层基于业务的封装供上层使用)

- 原则汇总

  - 开闭原则

# 常见模式

- MVC与MVP

![](https://blog.dreamtobe.cn/img/architecutre-mvp-mvc.gif)

- MVVM

![](https://blog.dreamtobe.cn/img/architecture-mvvm.png)

- MVVM-C

![](https://blog.dreamtobe.cn/img/architecture-mvvm-c.png)

# 架构类型

- <http://www.ruanyifeng.com/blog/2016/09/software-architecture.html>

# 分层架构

- 表现层 presentation (用户界面，负责视觉和用户互动)
- 业务层 business (实现业务逻辑)
- 持久层 persistence (提供数据，SQL 语句就放在这一层)
- 数据库 database
- (或者) 服务层(在逻辑层和持久层加一个服务层)

```shell
# 分层架构的缺点
即使只修改一个小地方
往往需要整个软件重新部署
不容易做持续发布
```

# 事件驱动架构

```javascript
通过事件进行通信

事件队列 event queue // 接收事件的入口
分发器 event mediator // 将不同的事件分发到不同的业务逻辑单元
事件通道 event channel // 分发器与处理器之间的联系渠道
事件处理器 event processor // 实现业务逻辑，处理完成后会发出事件，触发下一步操作

高度解耦，软件的扩展性好
事件的异步本质，软件不易产生堵塞
事件处理器可以独立地加载和卸载，容易部署

难以支持原子性操作，因为事件通过会涉及多个处理器，很难回滚
开发难度，难测试
```

# 微服务架构

- 三种实现模式

  - RESTful API 模式
  - RESTful 应用模式 (背后通常是一个多功能的应用程序，常见于企业内部)
  - 集中消息模式

```shell
服务导向架构
通过远程通信协议（比如REST、SOAP）联系

采用消息代理message broker，可以实现消息队列、负载均衡、统一日志和异常处理
缺点是会出现单点失败，消息代理可能要做成集群
```

# 云架构

```shell
主要解决扩展性和并发的问题，是最容易扩展的架构

没使用中央数据库，
而是把数据都复制到内存中，变成可复制的内存数据单元

处理单元（processing unit）+ 虚拟中间件（virtualized middleware）
```
