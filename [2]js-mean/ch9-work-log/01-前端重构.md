# 模块

```javascript
/**
 * 新增商品
 */
function addProductBox(options) {
    var settings = {
        title: '',
        self: '',  // 弹框父级外围元素
        parent: '' // 弹框所在页面
    };
    this.settings = $.extend(settings, options);
    this.body = $(this.settings.self);
    this.ready();
    return this;
}

var addProductBoxExtend = {
    // 接口
    url: {},

    // 弹框对象
    dialogIndex: null, // 用于关闭

    // 初始化
    ready: function () {

        this.showDialog(); // 默认打开弹框

        // 数据初始化

        // 初始化绑定事件
        this.bindEvent();

    },

    // 显示弹框
    showDialog: function () {
        var body = this.body,
            title = this.settings.title;
        this.body.show();
        var $this = this;

        this.dialogIndex = $.dialog({
            title: title,
            content: body,
            // zIndex: 700, // 弹框上弹框，注释这一行
            init: function () {
                var wrap = this.DOM.wrap;
                wrap.css({opacity: "0"}).animate({opacity: "1"}, 500);
            },
            ok: false, // 不用原生
            close: function () {
                $this.reset(); // 重置
            },
            esc: false,
            lock: true,
            min: false,
            max: false,
            resize: false,
            drag: false
        });
    },

    // 监听事件绑定
    bindEvent: function () {
        var $this = this;

        this.bindSubmitBtn();
        this.bindCloseDialog();
    },


    // 提交按钮
    bindSubmitBtn: function () {
        var $this = this;
        this.body.find('.btn-submit').off('click').on('click', function () {

            $this.dialogIndex.close();
        });
    },

    // 关闭弹框
    bindCloseDialog: function () {
        var $this = this;
        var dom = this.body.find('.btn-cancel');
        dom.off('click').on('click', function () {
            $this.dialogIndex.close();
        });
    },

    // 表单校验
    checkForm: function () {
        return true;
    },

    // 弹框隐藏/表单重置
    reset: function () {
        // 表单重置
        var body = this.body;
        body.find('input, textarea').val('');

        // 弹框重置并隐藏
        body.appendTo(this.settings.parent).hide();
    }

};
$.extend(addProductBox.prototype, addProductBoxExtend);
```

# 重构

- <https://juejin.im/post/5a029d986fb9a044fb072efb>

- 网站重构

  - 雪碧图

    - <http://www.imooc.com/learn/93>

- typo.css <https://github.com/sofish/typo.css>

  - 中文网页重设与排版：一致化浏览器排版效果，构建最适合中文阅读的网页排版

```javascript
// 建议
先易后难(命名格式->模块化）
持续测试（不要大量重构后测试）

// 存在问题
代码组织混乱 CSS，JS，HTML掺杂、布局随意(例用<br>增距)
HTML代码不符合标准(废弃元素 marquee 因为可以用JS实现)

性能上没有缓存，动态加载，脚本压缩，图片压缩

// 优化措施
不断查看上下文,删除无效代, 即使一些误删导致了bug也是值得的
代码规范化，缩小作用域
{
  模块化
  命名空间
  公共方法独立
  面向对象，共有私有接口
}

整理基础类库 例EXT JS和Jquery的重复

// 提高加载性能
CSS Sprite，合并首页背景图
延长静态资源缓存时间

// W3C指定的标准
structure HTML4.01
presentation CSS2
behavior ECMA DOM

// 合并代码文件
YUI Compresser -> Java
Web Optimization -> .NET
```

- 常用的文件组织结构

```javascript
--js
    --lib
    --custom.js
--css
    --lib
    --images(样式中的背景图)
    --reset.css
    --custom.js
--resource
--index.html

// 文件命名
jquery-1.8.2.min.js
bootstrap-responsive.css
```

# 资源更新

- 版本号
- 资源路径缓存

# react重构

- <https://juejin.im/post/5a4a6f35f265da4335631d83?utm_medium=fe&utm_source=weixinqun>
