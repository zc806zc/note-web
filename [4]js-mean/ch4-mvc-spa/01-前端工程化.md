# 脚手架 | 构建工具

- webpack | parcel
- fis3 <http://fis.baidu.com/fis3/docs/beginning/intro.html>
- Browserify
- Gulp
- Yeoman

# IDEA配置

- sass | less

- autoprefix

  - <http://www.css88.com/archives/5670>
  - <https://www.npmjs.com/package/less-plugin-autoprefix>

```javascript
npm install autoprefixer -g
npm install postcss-cli -g
npm install -g less
npm install -g less-plugin-clean-css
C:\Users\Administrator\AppData\Roaming\npm\postcss.cmd

--plugin=less-plugin-clean-css $FileName$

Parameters: -u autoprefixer -o $FileDir$\$FileName$  $FileDir$\$FileName$
Working directory :$ProjectFileDir$

// npm install postcss-less
```

# 模块化

- import、require、export、module.exports 混合使用详解 <https://juejin.im/post/5a2e5f0851882575d42f5609>

  - import
  - require
  - export
  - module.exports

- requireJS | seaJS

  - <http://requirejs.org/>
  - require.js与自动打包 <https://www.imooc.com/video/15349>

- rollup <https://github.com/rollup/rollup>

```shell
require.ensure([], (require) => {
   callback(null, [
     require('./src/pages/profitList').default,
   ]);
 });

如果一个 es6 模块只有一个 default 输出，
那么在转换成 commonjs 的时候也一起赋值给 module.exports
即整个导出对象被赋值了 default 所对应的值
```

# 前端模拟数据

- mock.js | easy mock
- faker.js

  - <https://github.com/Marak/faker.js>

- json server

  - <https://juejin.im/post/59f8628f6fb9a0450a66a745>

# 压缩

- Gzip 传输时压缩

  - header Content-Encoding:gzip
  - appache mod_deflate模块
  - Node.js Express compress()
  - 预压缩 + HTTP报头Content-Encoding:gzip

- 缩编、混淆和编译

  - 缩编：去掉空格换行符
  - 混淆：高级 对限定作用域内的变量 重命名为简短的名称

    - 全局变量和函数越少越好

  - 编译：更先进 分析代码

- JS压缩

  - uglifyJS
  - YUI Compressor（仅仅压缩）
  - Closure Compiler

  - JSMin 缩编工具

    - npm install -g jsmin
    - jsmin -o Listing.min.js listing.js

  - UglifyJS 缩编 + 混淆

    - <http://marijnhaverbeke.nl/uglifyjs>
    - npm install uglify-js -g
    - uglifyjs uglify-test.js -m -o uglify-test.min.js

  - Google Closure Compiler 代码编译

    - <http://closure-compiler.appspot.com/home>

- CSS压缩

  - CSS Compressor

- css移除

  - uncss <https://github.com/giakki/uncss>

- HTML压缩

  - 有必要吗？
  - HtmlCompressor

- 图片资源压缩|优化

  - 在线

    - TinyPNG
    - JEPGmini
    - 智图 <http://zhitu.isux.us/>

  - 本地：ImageOptim

# 文档

- API文档

  - JSDoc <http://usejsdoc.org/>
  - dox <https://github.com/tj/dox>
  - YUIDoc <http://yui.github.io/yuidoc/> (业内倾向)

- 文档

  - Docusaurus <https://github.com/facebook/Docusaurus>

- YUIDOC

  - github <http://yui.github.io/yuidoc/>

  - Dana主题 <https://github.com/carlo/yuidoc-theme-dana>

  - more主题 <http://yui.github.io/yuidoc/themes/>

  - 官方语法指南 <http://yui.github.io/yuidoc/syntax/>

```shell
// 文档定义
从源代码中提取特殊格式的文档

类比jQuery的文档
可以提高代码的可维护性

但注意保证文档的及时更新

// 一般的开始格式

让文档处理器只能理解我告诉它的东西 // 不要太智能

// Markdown
更具表达性的文档格式
转化成HTML更容易!
富文本
语法高亮 coding

// 使用YUIDoc创建一个文档网站
```

# 静态代码分析工具

- [JSlint](http://www.jslint.com)

  - [在线文档](http://www.jslint.com/lint.html)

- [JSlint nodejs](https://github.com/reid/node-jslint)

- [JSHint](http://www.jshint.com)

  - 在意一个没有用到的变量
  - [在线文档](http://jshint.com/docs/options/)
  - [插件](http://jshint.com/install/)

- Google Closure Compiler

  - 提高JS代码的下载速度和执行速度
  - 发现语法错误
  - [在线](http://closure-compiler.appspot.com/home)
  - [java运行](https://developers.google.com/closure/compiler/docs/gettingstarted_app)
  - [REST Web服务API](https://developers.google.com/closure/compiler/docs/gettingstarted_api)

- Closure Linter

# 度量代码质量

- 代码覆盖率工具

  - [Istanbul](https://github.com/gotwarlost/istanbul)
  - [ruanyf](http://www.ruanyifeng.com/blog/2015/06/istanbul.html)
  - node.js npm grunt 任务执行器
  - npm install -g grunt-cli
  - npm install grunt-contrib-jasmine --save-dev
  - grunt default
  - [PhantomJS](http://phantomjs.org) 基于Webkit的无界面浏览器

- 代码分析

  - [Plato](https://github.com/es-analysis/plato)

  - npm install -g plato

  - plato -d reports src all.js

# 构建工具及自动化

- 自动化构建解决日复一日的工作流程

  - 资源管理 : 图像压缩
  - 代码编写（JS静态代码分析，单元测试，代码缩编， 利用sass处理css）
  - 改进工作流，创建生产就绪的代码
  - 确保版本号

- [gulpjs](http://gulpjs.com) | [grunt使用示例](http://developer.51cto.com/art/201506/479127.htm) | [grunt插件](http://www.gruntjs.net/plugins)

- gulp较grunt的优势

  - 利用Node.js的Stream,使得一个任务的输出可以进行feed和pipe，而成为另一个任务的输入不 需要一个在硬盘写入临时文件的中途步骤，更高效
  - 配置信息不再是一个独立的很大的配置对象，而是链式调用
  - 专门设计成细分化的任务

- [yaml.org](http://yaml.org)

  - 更容易被人类阅读的语言格式
  - file.readYAML()

- webpack | prepack

- bower <http://bower.io>

  - <https://github.com/timmywil/grunt-bowercopy>
  - <https://github.com/zont/gulp-bower>

- 其他

  - spm
  - component
  - Jam

- gulp/webpack/bower等工具的差别

- 使用示例

```javascript
// gulp
npm install -g gulp
npm install gulp --save-dev
npm install gulp-jshint --save-dev
gulp

// grunt工作流
npm install grunt --save-dev
npm install grunt-contrib-jshint --save-dev // 校验
npm install grunt-contrib-connect --save-dev
npm install grunt-contrib-watch --save-dev
npm install grunt-contrib-clean --save-dev
npm install grunt-contrib-copy --save-dev
npm install grunt-contrib-jasmine --save-dev // 单元测试
npm install grunt-template-jasmine-istanbul --save-dev
npm install grunt-contrib-concat --save-dev
npm install grunt-contrib-uglify --save-dev // 代码缩编
npm install grunt-contrib-yuidoc --save-dev // 生成API

// Gulp工作流
npm install gulp --save-dev
npm install gulp-jshint --save-dev
npm install gulp-connect --save-dev
npm install gulp-clean --save-dev
npm install gulp-jasmine --save-dev
npm install gulp-istanbul --save-dev
npm install gulp-concat --save-dev
npm install gulp-uglify --save-dev
npm install gulp-yuidoc --save-dev
npm install gulp-rename --save-dev
npm install gulp-header --save-dev // 没有watch, 已经在API里
```

# gulp自动化构建方案

- gulp常用插件 <http://pinkyjie.com/2015/08/02/commonly-used-gulp-plugins-part-1/>

- gulp前端自动化构建 <https://www.imooc.com/video/16174>

- 这个方案很丑陋和暴力，但有效...

```javascript
// POSTCSSs深入系列
// https://www.w3cplus.com/PostCSS/using-postcss-together-with-sass-stylus-or-less.html
// 导入模块
var gulp = require('gulp'),
    less = require('gulp-less'),
    notify = require('gulp-notify'),
    plumber = require('gulp-plumber'),
    cssmin = require('gulp-clean-css');

var postcss = require('gulp-postcss');
var autoprefixer = require('autoprefixer'),
    cssnano = require('cssnano');

// 定义任务
gulp.task('compileLess', function () {
    var processors = [ autoprefixer, cssnano ];

    gulp.src('./**/css/**/*.less')
        .pipe(plumber({errorHandler: notify.onError('Error: <%= error.message %>')}))
        .pipe(less())
        .pipe(postcss(processors))
        // gulp-clean-css {rebase: false }ff
        .pipe(cssmin({compatibility: 'ie7', inline: ['remote'], rebase: false })) // 兼容ie7 @import fix
        .pipe(gulp.dest('./')); // 相对路劲下生成
});

// 监控
gulp.task('watchLessCompile', function () {
    gulp.watch('./**/css/**/*.less', ['compileLess']);
});
```

# 基于 Docker 打造前端持续集成开发环境

- <https://juejin.im/post/5a142d7b6fb9a0451170c2c7>
